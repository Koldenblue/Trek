<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T-R-E-K</title>
    
    <link rel="stylesheet" href="style.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

</head>

<body>

    <div class="container-fluid">
        <div class="container-fluid">
            <div class="section">
              <video playsinline autoplay loop muted poster>
                  <source src="Monaco-31661.mp4" type="video/mp4">
              </video>
          </div>
      
          <div class="navbar">
            <div class = "col-md-2">
                <nav class="navbar">
                     <a class=" type='button'" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                         <img class="logo"  src="SmallTreklogo.png" style = "width:100px;height:100px;">
                    </a> 
                </nav>
            </div>
            <div class= "col-md-2">
                <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                    <a class="navbar-brand" href="index.html">Start Over</a>
                </div>
            </div>
            <div class="col-md-8"></div>
        </div>

<div class="container">
    <div class="row">
        <div class="col-md-2"></div>
        
        <div class="col-md-8">
            <div class="firstQuestions">
                    <div class="form-group rounded firstQuestions">
                      <label for="typeoffood">What type of food would you like to eat?</label>
                      <input type="text" class="form-control" id="input" placeholder="Input seafood, fast food, gourmet..." aria-label="Input food type" aria-describedby="basic-addon2">
                    </div>
                    <div class="form-group rounded firstQuestions" >
                      <label for="pricing">Pricing?</label>
                      <select class="form-control" id="pricing" onchange ="selectOption()";>
                        <option>Select budget price...</option>
                        <option value="$">$ - Low</option>
                        <option value="$$">$$ - Medium</option>
                        <option value="$$$">$$$ - High</option>
                      </select>
                    </div>
                      
                  </form>
                <a type="submit" class="btn btn-dark" id="yelpSubmit">Submit</a>
                <a type="submit" class="btn btn-dark" href="TrekJourneyResult.html" id="skipfinaladddress">Skip</a>
            </div>
        </div>
        <div class="col-md-"></div>
    </div>  
    <footer>
        <nav class="navbar mx-auto navbar-light fixed-bottom" style="width: 100px;";>
            <div class="footer-text">
                <a href="http://facebook.com" target="_blank" class="fa fa-facebook"></a>
                <a href="http://instagram.com" target="_blank" class="fa fa-instagram"></a>
                <a href="http://linkedin.com" target="_blank" class="fa fa-linkedin"></a>
            </div>
        </nav>
    </footer>
</div> 

<script type="text/javascript">

    var apiKey = "Bearer huZM0jW7oxfJk_QU1FrFl1ZnuU8y3B8yAFAlAn7RKVr8YIRsHqibw2RnwD19sD2vXCCTTOUNJfwV5VMTEPSy7IecJkDUzzHDMj5fWehQ7wN8GSj2VPe_16ZdbCIrX3Yx"

    var address = "Gardena";

    var category = document.getElementById("input").value;
    
  
//     // var queryURL = "https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?limit=10&latitude=34.0610816&longitude=-118.422122&locale=it_IT&categories=" + category + "&term=restaurant";
//     // var queryURL = "https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?limit=10&latitude=" + latitude + "&longitude=" + longitude + "&locale=it_IT&categories=" + category + "&term=restaurant";
        function selectOption() {

            var selectMenu = document.getElementById("pricing");

            var displayValuePrice = selectMenu.options[selectMenu.selectedIndex].value;

            console.log(displayValuePrice);

            // localStorage.getItem()

        }



var submitBtn = document.getElementById("yelpSubmit");

submitBtn.addEventListener("click", function() {
    
    var selectMenu = document.getElementById("pricing");

    var displayValuePrice = selectMenu.options[selectMenu.selectedIndex].value;

    var category = document.getElementById("input").value;

    var queryURL = "https://cors-anywhere.herokuapp.com/https://api.yelp.com/v3/businesses/search?limit=3&location=" + address + "&locale=it_IT&categories=" + category + "&term=restaurant";

    $.ajax({
        url: queryURL,
        method: "GET",
        headers: {
            'Authorization': apiKey,
        },
      })
      .then(function(response){
    
        var busres1 = response.businesses[0];
        var busres2 = response.businesses[1];
        var busres3 = response.businesses[2];

        console.log(response.businesses.length);
        
        console.log(queryURL);
        var priceFilter = []
        for (var i = 0; i < response.businesses.length; i++) {
            
            console.log(i);

            if (response.businesses[i].price === "$") {

                priceFilter.push(response.businesses[i]);

            }

            else if (response.businesses[i].price === "$$") {

                priceFilter.push(response.businesses[i]);

            }

            else {

                priceFilter.push(response.businesses[i]);

            }
            console.log(response);
            console.log(priceFilter);
            console.log(response.businesses[i].price);
            console.log(response.businesses[i]);

            localStorage.setItem("Restaurants", JSON.stringify(priceFilter));

            location.href="TrekYelpResult.html";

}

             var latitude = response.businesses[0].coordinates.latitude;

        var longitude = response.businesses[0].coordinates.longitude;
        
        var restaurantCoordinates1 = {
            
            latitude, longitude
        
        }
            console.log(latLongObj1)
        
        var latitude = response.businesses[1].coordinates.latitude;

        var longitude = response.businesses[1].coordinates.longitude;
        
        var restaurantCoordinates2 = {
            
            latitude, longitude
        
        }
            console.log(latLongObj2)
        
        var latitude = response.businesses[2].coordinates.latitude;

        var longitude = response.businesses[2].coordinates.longitude;
        
        var restaurantCoordinates3 = {
            
            latitude, longitude
        
        }
            console.log(latLongObj3)
        
      })
    
    // assign value to option chosen on pulldown menu
        
    // create variable for submit button
    
            
    // console.log(priceFilter);

    
    // create function for clicking submit button

        // //   console.log(response);
        // console.log(response);
        // // for result#1
        // // budget 
        // console.log(busres1.price);
        // // image
        // console.log(busres1.image_url);
        // // rating
        // console.log(busres1.rating);
        
        // // for result#2
        // // budget
        // console.log(busres2.price);
        // // image
        // console.log(busres2.image_url);
        // // rating
        // console.log(busres2.rating);

        // // for result#3
        // // budget
        // console.log(busres3.price);
        // // image
        // console.log(busres3.image_url);
        // // rating
        // console.log(busres3.rating);
        // location.href="TrekYelpResult.html";
      })
 

</script>
</body>
</html>